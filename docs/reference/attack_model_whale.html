<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Attack Model — attack_model_whale • attackR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Attack Model — attack_model_whale" />
<meta property="og:description" content="attack_model_whale models the visual aspects of an
attack by a whale on a prey
This function is a customised version of attack_model which
incorporates the unique changes to a rorqual whale's visual profile caused
by it opening its huge mouth when attacking a school of prey.
It contains several additional inputs relating to the morphology of the
mouth and the timings of its opening, which greatly change the whale's
visual profile.
This help document only contains help on use of the inputs specific to this
function. See attack_model for description of the others." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">attackR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/main.html">How `attackR` works</a>
    </li>
    <li>
      <a href="../articles/whales.html">How `attackR` works with whale attacks</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Attack Model</h1>
    
    <div class="hidden name"><code>attack_model_whale.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><em><code>attack_model_whale</code></em> models the visual aspects of an
attack by a whale on a prey</p>
<p>This function is a customised version of <em><code><a href='attack_model.html'>attack_model</a></code></em> which
incorporates the unique changes to a rorqual whale's visual profile caused
by it opening its huge mouth when attacking a school of prey.</p>
<p>It contains several additional inputs relating to the morphology of the
mouth and the timings of its opening, which greatly change the whale's
visual profile.</p>
<p>This help document only contains help on use of the inputs specific to this
function. See <em><code><a href='attack_model.html'>attack_model</a></code></em> for description of the others.</p>
    </div>

    <pre class="usage"><span class='fu'>attack_model_whale</span>(<span class='no'>speed</span>, <span class='kw'>model_length</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>frequency</span> <span class='kw'>=</span> <span class='fl'>60</span>,
 <span class='kw'>body_length</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>body_width_v</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>body_width_h</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>profile_v</span> <span class='kw'>=</span>
 <span class='kw'>NULL</span>, <span class='kw'>profile_h</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>max_width_loc_v</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>max_width_loc_h</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
 <span class='kw'>width_filter</span> <span class='kw'>=</span> <span class='st'>"mid"</span>, <span class='kw'>jaw_length</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>jaw_angle_upper</span> <span class='kw'>=</span> <span class='fl'>0.5235988</span>,
 <span class='kw'>jaw_angle_lower</span> <span class='kw'>=</span> <span class='fl'>0.8726646</span>, <span class='kw'>a_mouth_open</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>b_max_gape_start</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
 <span class='kw'>c_max_gape_end</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>d_mouth_closed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>simple_output</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>plot</span> <span class='kw'>=</span>
 <span class='fl'>TRUE</span>, <span class='kw'>plot_from</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>plot_to</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>alpha_range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dadt_range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>speed</th>
      <td><p>numeric. Either a single constant speed value or vector of speeds
at the same frequency in Hz as <em><code>frequency</code></em>. Must be same unit as
<em><code>body_length</code></em> per second. If a data.frame is entered the first
colummn is used. For a constant speed value the function will repeat this
the required number of times at the correct frequency based on
<em><code>model_length</code></em>.</p></td>
    </tr>
    <tr>
      <th>model_length</th>
      <td><p>integer. Total length of the model in rows. Required if
<em><code>speed</code></em> is a single value, in which case along with frequency it
determines the distance the predator starts at. If <em><code>speed</code></em> is a
vector <em><code>model_length</code></em> can be left NULL, in which case it is assumed
the predator reaches the prey on the last value, and the length of the speed
vector determines total length of model. Alternatively,
<em><code>model_length</code></em> can be used to set a different capture point along the
speed vector, in which case its value must be less than the total length of
<em><code>speed</code></em>.</p></td>
    </tr>
    <tr>
      <th>frequency</th>
      <td><p>numeric. Frequency (Hz) of the model, i.e. how many speed and
other measurements per second. Must be same frequency in Hz as
<em><code>speed</code></em>.</p></td>
    </tr>
    <tr>
      <th>body_length</th>
      <td><p>numeric. Length of the attacker. Must be same units as
<em><code>body_width_v</code></em> and <em><code>body_width_h</code></em>, and that used in
<em><code>speed</code></em>.</p></td>
    </tr>
    <tr>
      <th>body_width_v</th>
      <td><p>numeric. Maximum width of the attacker in the vertical
plane.</p></td>
    </tr>
    <tr>
      <th>body_width_h</th>
      <td><p>numeric. Maximum width of the attacker in the horizontal
plane.</p></td>
    </tr>
    <tr>
      <th>profile_v</th>
      <td><p>numeric. A vector describing the shape of the attacker in the
vertical plane. See details.</p></td>
    </tr>
    <tr>
      <th>profile_h</th>
      <td><p>numeric. A vector describing the shape of the attacker in the
horizontal plane. See details.</p></td>
    </tr>
    <tr>
      <th>max_width_loc_v</th>
      <td><p>numeric. Location of the maximum girth in the vertical
plane of the predator along the body, if not provided as part of the body
profile inputs. See details.</p></td>
    </tr>
    <tr>
      <th>max_width_loc_h</th>
      <td><p>numeric. Location of the maximum girth in the
horizontal plane of the predator along the body, if not provided as part of
the body profile inputs. See details.</p></td>
    </tr>
    <tr>
      <th>width_filter</th>
      <td><p>string. Filters apparent widths between vertical and
horizontal planes for each row of the model in various ways. See details.</p></td>
    </tr>
    <tr>
      <th>jaw_length</th>
      <td><p>numeric. distance of the whale's jaw 'hinge' (i.e. where
upper and lower jaws meet) from the rostrum, in the same units as the
body_length. See details.</p></td>
    </tr>
    <tr>
      <th>jaw_angle_upper</th>
      <td><p>numeric. Angle in radians off the whale's longitudnal
axis of the upper jaw at maximum gape. See details.</p></td>
    </tr>
    <tr>
      <th>jaw_angle_lower</th>
      <td><p>numeric. Angle in radians off the whale's longitudnal
axis of the lower jaw at maximum gape. See details.</p></td>
    </tr>
    <tr>
      <th>a_mouth_open</th>
      <td><p>integer. Iteration of the model (i.e. row, or placement
along the speed profile) where the mouth starts to open. See details.</p></td>
    </tr>
    <tr>
      <th>b_max_gape_start</th>
      <td><p>integer. Iteration of the model (i.e. row, or placement
along the speed profile) where the mouth has reached max gape. See details.</p></td>
    </tr>
    <tr>
      <th>c_max_gape_end</th>
      <td><p>integer. Iteration of the model (i.e. row, or placement
along the speed profile) where the mouth starts to close See details.</p></td>
    </tr>
    <tr>
      <th>d_mouth_closed</th>
      <td><p>integer. Iteration of the model (i.e. row, or placement
along the speed profile) where the mouth has fully closed. See details.</p></td>
    </tr>
    <tr>
      <th>simple_output</th>
      <td><p>logical. Choose structure of output. If TRUE, a simple
data frame of the model is returned, otherwise output is a <em><code>list</code></em>
object given an <em><code>attack_model_whale</code></em> class, and containing the final
model, input parameters, subset regions, and more.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>logical. Choose to plot result.</p></td>
    </tr>
    <tr>
      <th>plot_from</th>
      <td><p>numeric. Time on x-axis to plot from.</p></td>
    </tr>
    <tr>
      <th>plot_to</th>
      <td><p>numeric.  Time on x-axis to plot to.</p></td>
    </tr>
    <tr>
      <th>alpha_range</th>
      <td><p>numeric. Vector of two values of alpha. Optional. These
will appear on any plot as a blue region, and if <em><code>simple_output =
 FALSE</code></em>, this region of the model is subset out to a separate entry in the
saved <em><code>list</code></em> object. If any are not reached in the scenario there
should be a message. If upper range is not reached, it is plotted from lower
value to end of model, i.e. <em><code>model_length</code></em> location.</p></td>
    </tr>
    <tr>
      <th>dadt_range</th>
      <td><p>numeric. Vector of two values of alpha. Optional. These will
appear on any plot as a green region, and if <em><code>simple_output = FALSE</code></em>,
this region of the model is subset out to a separate entry in the saved
<em><code>list</code></em> object. If any are not reached in the scenario there should be
a message. If upper range is not reached, it is plotted from lower value to
end of model, i.e. <em><code>model_length</code></em> location.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These inputs are used to calculate the apparent width to the prey of
a whale's opening jaws, and this is subsequently used to calculate the
maximum <strong>α</strong>.</p>
    <h2 class="hasAnchor" id="jaw-length"><a class="anchor" href="#jaw-length"></a><em><code>jaw_length</code></em></h2>

    <p>The distance of the whale's jaw 'hinge' (i.e.
where upper and lower jaws meet) from the rostrum, in the same units as the
<em><code>body_length</code></em>. Can be an exact value or an allometric formula based
on length. For example:<br /></p>
<p><code>## Humpback Whale jaw location in cm (source:)</code><br /> <code>jaw_length =
 (10^(1.205*log10(hw_bl/100) - 0.880))*100</code></p>
<p><code>## Blue Whale jaw location in cm (source:)</code><br /> <code>jaw_length =
 10^(1.36624*log10(bw_bl/100) - 1.21286)*100</code></p>
<p>Note the body length values (<em><code>hw_bl</code></em>, <em><code>bw_bl</code></em>) must exist
externally; they cannot reference the entered <em><code>body_length</code></em> value
internal to the function, unless this also references the same existing
value.</p>
    <h2 class="hasAnchor" id="jaw-angle-upper"><a class="anchor" href="#jaw-angle-upper"></a><em><code>jaw_angle_upper</code></em></h2>

    <p>This is the angle in radians off the
longitudnal axis of the whale of the upper jaw at maximum gape. In both
humpbacks and blue whales this is 0.5235988 (30°).</p>
    <h2 class="hasAnchor" id="jaw-angle-lower"><a class="anchor" href="#jaw-angle-lower"></a><em><code>jaw_angle_lower</code></em></h2>

    <p>This is the angle in radians off the
longitudnal axis of the whale of the lower jaw at maximum gape. In both
humpbacks and blue whales this is 0.8726646 (50°).</p>
    <h2 class="hasAnchor" id="a-b-c-d-inputs"><a class="anchor" href="#a-b-c-d-inputs"></a><em><code>a_, b_ c_, d_</code> inputs</em></h2>

    <p><em><code>a_mouth_open</code></em> - when the mouth
starts to open <br /> <em><code>b_max_gape_start</code></em> - when maximum gape is reached
<br /> <em><code>c_max_gape_end</code></em> - when mouth starts to close, or how long it is
held at max gape <br /> <em><code>d_mouth_closed</code></em> - when mouth is completely
closed <br /> <br /></p>
<p>These inputs set the timings (i.e. iteration, row or frame) of these events
within the model. If <em><code>speed</code></em> is a vector, they set the locations
along the speed vector these events occur. Similarly if <em><code>speed</code></em> is a
single value, they set similarly the timings within the model, but obviously
this is related to <em><code>model_length</code></em>.</p>
<p>The complete mouth opening action does not have to occur during the model.
The inputs can be used to set, for example timing of max gape to be at the
last value in the speed vector. Also, if these are left <em><code>NULL</code></em>, the
mouth will not open, and the model is equivalent to one created using
<em><code><a href='attack_model.html'>attack_model</a></code></em>.</p>
    <h2 class="hasAnchor" id="application-of-the-mouth-opening-and-morphology-inputs"><a class="anchor" href="#application-of-the-mouth-opening-and-morphology-inputs"></a>Application of the mouth opening and morphology inputs</h2>

    <p>The function
programatically determines the location of the jaw tips at each iteration of
the model during the mouth opening event, and their distance from the prey,
calculates their visual angle <strong>α</strong>, and combines these to give a total
jaw <strong>α</strong>. This is then compared to the <strong>α</strong> of the rest of the body to
determine the maximum <strong>α</strong>. These calculations are done in the vertical
plane only, and occur separately from any <strong>α</strong> calculations done using
the body profiles; if the total jaw <strong>α</strong> is greater than the <strong>α</strong>
determined from the body widths, it will always be selected as the maximum
<strong>α</strong> regardless of any filtering between vertical and horizontal planes
using <em><code>width_filter</code></em>.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#jaw-length"><em><code>jaw_length</code></em></a></li>
      <li><a href="#jaw-angle-upper"><em><code>jaw_angle_upper</code></em></a></li>
      <li><a href="#jaw-angle-lower"><em><code>jaw_angle_lower</code></em></a></li>
      <li><a href="#a-b-c-d-inputs"><em><code>a_, b_ c_, d_</code> inputs</em></a></li>
      <li><a href="#application-of-the-mouth-opening-and-morphology-inputs">Application of the mouth opening and morphology inputs</a></li>
    </ul>

    <h2>Author</h2>
    <p>Nicholas Carey - <a href='mailto:nicholascarey@gmail.com'>nicholascarey@gmail.com</a>, Dave Cade
<a href='mailto:davecade@stanford.edu'>davecade@stanford.edu</a>,</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicholas Carey, Dave Cade, Paolo Domenici.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


