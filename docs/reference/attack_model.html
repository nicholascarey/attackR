<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Attack Model — attack_model • attackR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Attack Model — attack_model" />
<meta property="og:description" content="attack_model models the visual aspects of an attack by a
predator on a prey
Using parameters such as predator size, speed, shape etc. this function
models the visual aspects of an attack by the predator on a prey. From the
prey's perspective it calculates the visual angle of the attacker
(alpha, or α) in radians, and the rate of change of this angle
(dα/dt in radians/s), as well as distance and time to capture." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">attackR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/main.html">Overview of `attackR`</a>
    </li>
    <li>
      <a href="../articles/whales.html">`attackR` and whale attacks</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Attack Model</h1>
    
    <div class="hidden name"><code>attack_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><em><code>attack_model</code></em> models the visual aspects of an attack by a
predator on a prey</p>
<p>Using parameters such as predator size, speed, shape etc. this function
models the visual aspects of an attack by the predator on a prey. From the
prey's perspective it calculates the visual angle of the attacker
(<strong>alpha</strong>, or <strong>α</strong>) in radians, and the rate of change of this angle
(<strong>dα/dt</strong> in radians/s), as well as distance and time to capture.</p>
    </div>

    <pre class="usage"><span class='fu'>attack_model</span>(<span class='no'>speed</span>, <span class='kw'>model_length</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>frequency</span> <span class='kw'>=</span> <span class='fl'>60</span>, <span class='kw'>body_length</span> <span class='kw'>=</span>
 <span class='kw'>NULL</span>, <span class='kw'>body_width_v</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>body_width_h</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>profile_v</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>profile_h</span>
 <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>max_width_loc_v</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>max_width_loc_h</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>width_filter</span> <span class='kw'>=</span>
 <span class='st'>"mid"</span>, <span class='kw'>simple_output</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>plot_from</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>plot_to</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
 <span class='kw'>alpha_range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dadt_range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>speed</th>
      <td><p>numeric. Either a single constant speed value or vector of speeds
at the same frequency in Hz as <em><code>frequency</code></em>. Must be same unit as
<em><code>body_length</code></em> per second. If a data.frame is entered the first
colummn is used. For a constant speed value the function will repeat this
the required number of times at the correct frequency based on
<em><code>model_length</code></em>.</p></td>
    </tr>
    <tr>
      <th>model_length</th>
      <td><p>integer. Total length of the model in rows. Required if
<em><code>speed</code></em> is a single value, in which case along with frequency it
determines the distance the predator starts at. If <em><code>speed</code></em> is a
vector <em><code>model_length</code></em> can be left NULL, in which case it is assumed
the predator reaches the prey on the last value, and the length of the speed
vector determines total length of model. Alternatively,
<em><code>model_length</code></em> can be used to set a different capture point along the
speed vector, in which case its value must be less than the total length of
<em><code>speed</code></em>.</p></td>
    </tr>
    <tr>
      <th>frequency</th>
      <td><p>numeric. Frequency (Hz) of the model, i.e. how many speed and
other measurements per second. Must be same frequency in Hz as
<em><code>speed</code></em>.</p></td>
    </tr>
    <tr>
      <th>body_length</th>
      <td><p>numeric. Length of the attacker. Must be same units as
<em><code>body_width_v</code></em> and <em><code>body_width_h</code></em>, and that used in
<em><code>speed</code></em>.</p></td>
    </tr>
    <tr>
      <th>body_width_v</th>
      <td><p>numeric. Maximum width of the attacker in the vertical
plane.</p></td>
    </tr>
    <tr>
      <th>body_width_h</th>
      <td><p>numeric. Maximum width of the attacker in the horizontal
plane.</p></td>
    </tr>
    <tr>
      <th>profile_v</th>
      <td><p>numeric. A vector describing the shape of the attacker in the
vertical plane. See details.</p></td>
    </tr>
    <tr>
      <th>profile_h</th>
      <td><p>numeric. A vector describing the shape of the attacker in the
horizontal plane. See details.</p></td>
    </tr>
    <tr>
      <th>max_width_loc_v</th>
      <td><p>numeric. Location of the maximum girth in the vertical
plane of the predator along the body, if not provided as part of the body
profile inputs. See details.</p></td>
    </tr>
    <tr>
      <th>max_width_loc_h</th>
      <td><p>numeric. Location of the maximum girth in the
horizontal plane of the predator along the body, if not provided as part of
the body profile inputs. See details.</p></td>
    </tr>
    <tr>
      <th>width_filter</th>
      <td><p>string. Filters apparent widths between vertical and
horizontal planes for each row of the model in various ways. See details.</p></td>
    </tr>
    <tr>
      <th>simple_output</th>
      <td><p>logical. Choose structure of output. If TRUE, a simple
data frame of the model is returned, otherwise output is a <em><code>list</code></em>
object given an <em><code>attack_model</code></em> class, and containing the final model,
input parameters, subset regions, and more.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>logical. Choose to plot result.</p></td>
    </tr>
    <tr>
      <th>plot_from</th>
      <td><p>numeric. Time on x-axis to plot from.</p></td>
    </tr>
    <tr>
      <th>plot_to</th>
      <td><p>numeric.  Time on x-axis to plot to.</p></td>
    </tr>
    <tr>
      <th>alpha_range</th>
      <td><p>numeric. Vector of two values of alpha. Optional. These
will appear on any plot as a blue region, and if <em><code>simple_output =
 FALSE</code></em>, this region of the model is subset out to a separate entry in the
saved <em><code>list</code></em> object. If any are not reached in the scenario there
should be a message. If upper range is not reached, it is plotted from lower
value to end of model, i.e. <em><code>model_length</code></em> location.</p></td>
    </tr>
    <tr>
      <th>dadt_range</th>
      <td><p>numeric. Vector of two values of alpha. Optional. These will
appear on any plot as a green region, and if <em><code>simple_output = FALSE</code></em>,
this region of the model is subset out to a separate entry in the saved
<em><code>list</code></em> object. If any are not reached in the scenario there should be
a message. If upper range is not reached, it is plotted from lower value to
end of model, i.e. <em><code>model_length</code></em> location.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Information on inputs:</p>
    <h2 class="hasAnchor" id="input-units"><a class="anchor" href="#input-units"></a>Input units</h2>

    <p><em><code>speed</code></em> should be in the same units as body
measurements (length, width etc.) <em>per second</em>, e.g. cm/s. It can be either
a single, constant speed value or a vector of speeds (at the correct
<em><code>frequency</code></em>). If a single value, <em><code>model_length</code></em> is required in
order to calculate the distance the predator starts the attack from. For
example, at a frequency of 60 Hz and <em><code>model_length</code></em> of 180, the model
will be three seconds in duration. Therefore, at a constant speed of 600
cm/s, the predator will start from approximately 1800 cm away.</p>
<p><em><code>frequency</code></em> is in <em><code>Hz</code></em>. If <em><code>speed</code></em> is a vector it
should be at the same frequency.</p>
<p><em><code>model_length</code></em> is required when <em><code>speed</code></em> is a single value,
where it determines the total length of the model. It is also used to vary
where on variable speed vectors the predator times reaching the prey, for
example cooincident with its maximum speed, to examine how this affects
factors such as <strong>dα/dt</strong>. If left as the default <em><code>model_length =
 NULL</code></em>, the model ends with the predator reaching the prey on the last speed
value.</p>
    <h2 class="hasAnchor" id="morphology"><a class="anchor" href="#morphology"></a>Morphology</h2>

    <p>In order to correctly model the widest apparent part of
the predator, and thus <strong>α</strong>, the function requires several morphometric
inputs:</p>
    <h2 class="hasAnchor" id="length-and-width"><a class="anchor" href="#length-and-width"></a><em>Length and Width</em></h2>

    <p><em><code>body_length</code></em> is simply the total length
from nose to tail (or equivalent). <em><code>body_width_v</code></em> and
<em><code>body_width_h</code></em> are the <strong>maximum</strong> body widths in the vertical (i.e.
dorsal:ventral) and horizontal (left:right) planes of the body. These must
all be in the same units.</p>
    <h2 class="hasAnchor" id="body-profiles"><a class="anchor" href="#body-profiles"></a>Body Profiles</h2>

    <p><em><code>profile_v</code></em> and <em><code>profile_h</code></em> are vectors
of widths of the predator's body as a proportion of the maximum width going
from the anterior (nose) to the posterior (tail). Therefore, they should
generally start and end on zero (though they don't have to), and all values
must be between zero and 1. They must be regularly spaced, e.g. every 10\<!-- % -->
along the body. They do not have to be the same length (i.e. resolution),
though it is recommended they are. The longer (i.e. higher resolution) these
measurements are, the better their representation of the morphology of the
animal. Actual values of width along the body are calculated to the
resolution of the entered unit of <em><code>body_length</code></em> by linearly
interpolating between each proportional width. For example, if the predator
<em><code>body_length</code></em> is 1000cm, a width value in cm is calculated at every
cm along the body by interpolating between the proportional widths.
Therefore, use units which will give an appropriate resolution, at least
greater than the profile vector lengths. The higher the numeric value of the
<em><code>body_length</code></em> the better, at least three digits is recommended.</p>
<p>You do not need to enter both <em><code>profile_v</code></em> and <em><code>profile_h</code></em>,
only one is required; if one is left NULL the model will use the other to
calculate <strong>α</strong>. This can be useful if your predator is always wider in
one plane than the other.</p>
<p>The function calculates the widest apparent width of any part of the
predator's body from the prey's perspective at each iteration of the model,
in both planes. This is <em>usually</em> the maximum width of the predator, but it
also depends on the predator's shape. At close distances, more anterior
parts of the predator will appear to be wider, and so result in a higher
<strong>α</strong> value.</p>
<p>Note: no section of the body posterior of the maximum width can ever show a
larger apparent visual <strong>α</strong> than the maximum width. Therefore, the
function only really needs profile data from the maximum width forward.
However, it is important for the function to work correctly that a full,
evenly spaced profile is provided. Having said that, the proportional width
values posterior of the max width can be placeholder values and it will not
affect calculated <strong>α</strong>, as long as they are less than 1 and spaced
correctly.</p>
    <h2 class="hasAnchor" id="filtering-of-maximum-apparent-width-between-body-planes"><a class="anchor" href="#filtering-of-maximum-apparent-width-between-body-planes"></a>Filtering of maximum apparent width between body planes</h2>

    <p>Apparent
widths are calculated for both body planes, if two are entered. Which width
at each body segment (e.g. horizontal or vertical) used to calculate <strong>α</strong>
is determined via the <em><code>width_filter</code></em> operator. This can be the
midpoint value between them (<em><code>"mid"</code></em>, the default), maximum value
(<em><code>"max"</code></em>), or minimum value (<em><code>"min"</code></em>). You can also choose to
use only the vertical or horizontal profile widths exclusively
(<em><code>"v"</code></em>, <em><code>"h"</code></em>). You can also choose to use the predator's
maximum width in either plane (<em><code>max_width_v</code></em>, <em><code>max_width_h</code></em>)
to calculate <strong>α</strong>, in which case all other segments of the body are
ignored, and only <strong>α</strong> of the maximum width is determined.</p>
<p><em><code>max_width_loc_v</code></em> and <em><code>max_width_loc_h</code></em> are the locations of
the maximum widths of the predator occur along the body as a proportion of
the total body length going from the anterior. They are only necessary if
they are not specified as one of the proportional widths in
<em><code>profile_v</code></em> and <em><code>profile_h</code></em>, that is none of these have the
value of exactly 1. They can also occur at an intermediate section of the
body, not included as part of the body profiles.</p>
    <h2 class="hasAnchor" id="output"><a class="anchor" href="#output"></a>Output</h2>

    <p>By default <em><code>simple_output = TRUE</code></em> the output is a data
frame with every row representing a single instance (<em><code>frame</code></em>) of the
model at the set <em><code>frequency</code></em>. The data frame contains columns for
frame, speed, time, time reversed, distance of the nose of the predator,
<strong>α</strong>, and <strong>dα/dt</strong>. If <em><code>simple_output = FALSE</code></em> the output is a
<em><code><a href='https://rdrr.io/r/base/list.html'>list()</a></code></em> object given class <em><code>attack_model</code></em> containing the
above data frame, plus inputs, subset regions (see next section), and data
detailing how each alpha was calculated (interpolated profiles, locations of
maximum apparent width at each frame, etc.). This option greatly increases
the time the function takes to run.</p>
    <h2 class="hasAnchor" id="subset-regions"><a class="anchor" href="#subset-regions"></a>Subset regions</h2>

    <p><em><code>alpha_range</code></em> and <em><code>dadt_range</code></em> allow
regions bounded by values of <strong>α</strong> and <strong>dα/dt</strong> to be subset. Both
inputs are a vector of two numeric values indicating the lower and upper
range of the desired <strong>α</strong> and <strong>dα/dt</strong> region. The function identifies
the closest matching, first instance of these values in the <em><code>$alpha</code></em>
and <em><code>dadt</code></em> columns of the model data frame. If <em><code>simple_output =
 FALSE</code></em>, these can be found as their own elements in the output
<em><code><a href='https://rdrr.io/r/base/list.html'>list()</a></code></em> object. If <em><code>plot = TRUE</code></em> these are also plotted as
blue and green shaded regions, respectively.</p>
    <h2 class="hasAnchor" id="plotting"><a class="anchor" href="#plotting"></a>Plotting</h2>

    <p>If <em><code>plot = TRUE</code></em> a plot is produced showing <em>speed</em>,
<strong>α</strong> and <strong>dα/dt</strong>. The X range of the plot can set with
<em><code>plot_from</code></em> and <em><code>plot_to</code></em>. Optional <em><code>alpha_range</code></em> and
<em><code>dadt_range</code></em> can also be plotted (see above).</p>
    <h2 class="hasAnchor" id="general"><a class="anchor" href="#general"></a>General</h2>

    <p>Models end when the nose (most anterior part in the
profiles) of the predator reaches the prey (last row of the data.frame,
where time and distance equal zero).</p>
<p>At some point, the maximum girth of the predator will not make up the widest
apparent visual angle of the predator, but more anterior segments will
appear to the prey to be wider, and have a higher <strong>α</strong>. After
interpolation of body profiles, filtering of apparent widths (see above),
and identification of maximum apparent width at each iteration of the model,
these final widths and their relative distances from the observing prey are
used to calculate the viewing angle, <strong>α</strong>, and used to calculate the rate
of change in <strong>α</strong>, <strong>dα/dt</strong> in radians/s.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#input-units">Input units</a></li>
      <li><a href="#morphology">Morphology</a></li>
      <li><a href="#length-and-width"><em>Length and Width</em></a></li>
      <li><a href="#body-profiles">Body Profiles</a></li>
      <li><a href="#filtering-of-maximum-apparent-width-between-body-planes">Filtering of maximum apparent width between body planes</a></li>
      <li><a href="#output">Output</a></li>
      <li><a href="#subset-regions">Subset regions</a></li>
      <li><a href="#plotting">Plotting</a></li>
      <li><a href="#general">General</a></li>
    </ul>

    <h2>Author</h2>
    <p>Nicholas Carey - <a href='mailto:nicholascarey@gmail.com'>nicholascarey@gmail.com</a>, Dave Cade
<a href='mailto:davecade@stanford.edu'>davecade@stanford.edu</a>,</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicholas Carey, Dave Cade, Paolo Domenici.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


